<html>
  <head>
    <title>IT入門・研究室 C言語入門</title>
  </head>
  <body>
    <center>
      <h1>とりあえずプログラミングしてみる</h1>
      <hr>
      <table><tr><td>
        <h3><a name="project">プロジェクトの考え方</a></h3>
        まず、Visual Studioでプログラミングするため必要な考え方を確認します。<br>
        ソースファイルをまとめたものを「<font color="red"><b>プロジェクト</b></font>」と呼びます。<br>
        <img src="img/project1.png" border="1"/><br>
        <br>
        プロジェクト単位でアプリケーションが作られます。<br>
        <img src="img/project2.png" border="1"/><br>
        <br><br>
        <h3><a name="solution">ソリューションの考え方</a></h3>
        プロジェクトをまとめたものを「<font color="red"><b>ソリューション</b></font>」と呼びます。<br>
        <img src="img/solution.png" border="1"/><br>
        <br><br>
        <h3><a name="make">ソリューションとプロジェクトの作成</a></h3>
        では、ソリューションとプロジェクトを作成しましょう。<br>
        Visual Studioを起動して、この画面が表示されたら、「コードなしで続行(W)」を<br>
        クリックします。<br>
        <img src="img/make001.png" border="1"/><br>
        <br>
        メインの画面が開いてきたら、<br>
        「ファイル(F)」→「新規作成(N)」→「プロジェクト(P)...」<br>
        の順番で選択・クリックします。<br>
        <img src="img/make002.png" border"1"/><br>
        <br>
        次の画面が表示されたら「空のソリューション」を探して選択し、「次へ(N)」を押します。<br>
        <img src="img/make003.png" border="1"/><br>
        <br>
        好きなソリューション名と場所を決めて、「作成(C)」を押します。<br>
        ここでは「CGettingStarted」というソリューション名で進めます。<br>
        <img src="img/make004.png" border="1"/><br>
        これで「プロジェクトを持っていないソリューション」ができました。<br>
        このソリューションにプロジェクトを作成します。<br>
        <br>
        先程と同様に、「ファイル(F)」→「新規作成(N)」→「プロジェクト(P)...」の<br>
        順番で選択・クリックします。<br>
        <img src="img/make002.png" border="1"/><br>
        <br>
        「空のプロジェクト」を選択して、「次へ(N)」を押します。<br>
        ※空のプロジェクトが複数ある場合は、「C++」「Windows」「コンソール」と<br>
        　書かれているものを選択します。<br>
        <img src="img/make005.png" border="1"/><br>
        <br>
        次のように設定して、「作成(C)」を押します。<br>
        　プロジェクト名：好きな名前<br>
        　場所　　　　　：（勝手に設定されるのでそのままにする）<br>
        　ソリューション：ソリューションに追加<br>
        ここでは、プロジェクト名を「step_001」というプロジェクト名で進めます。<br>
        <img src="img/make006.png" border="1"/><br>
        <br>
        ソリューションエクスプローラーに次のように表示されればOKです。<br>
        <img src="img/make007.png" border"1"/><br>
        これで、ソリューションの中にプロジェクトを作成できました。<br>
        <br><br>
        <h3><a name="extension">ソースファイルの拡張子について</a></h3>
        C言語のソースファイルで使われるファイル拡張子は「<b><font color="red">.c</b></font>」です。<br>
        ですが、この後に作成するソースファイルでは「.cpp」がデフォルトになっています。<br>
        これは、Visual StudioがC++の開発環境であることが理由です。<br>
        C++はC言語を礎に作られたプログラミング言語のため、C言語のプログラムも<br>
        可能になっています。<br>
        <br>
        ここはあくまでも「C言語入門」のため、拡張子も「.c」にしています。<br>
        <br><br>
        <h3><a name="source">ソースファイルの作成</a></h3>
        ソースファイルを作成します。<br>
        ソリューションエクスプローラーで、先ほど作成したプロジェクトの中にある<br>
        「ソースファイル」を右クリックします。<br>
        そして「追加(D)」→「新しい項目(W)...」を選択・クリックします。<br>
        <img src="img/source001.png" border="1"/><br>
        <br>
        次の順番で操作します。<br>
        　「C++ファイル(.cpp)」を選択する。<br>
        　名前(N):に好きなファイル名を入力する。<br>
        　　　　　ここでは「main.c」で統一します。<br>
        　「追加(A)」を押します。<br>
        <img src="img/source002.png" border="1"/><br>
        <br>
        次のようにソースファイル内に、追加したファイルが表示されればOKです。<br>
        <img src="img/source003.png" border="1"/><br>
        <br><br>
        <h3><a name="coding">プログラムを記述する</a></h3>
        次のように入力してください。内容はまだ理解できなくても大丈夫です。<br>
        こういったプログラムを入力する作業を「<font color="red"><b>コーディング</b></font>」とも言います。<br>
        <table border="1"><tr><td><code>
          #include &lt;stdio.h&gt;<br>
          <br>
          int add(int i, int j);<br>
          <br>
          /* メイン関数 */<br>
          int main()<br>
          {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;int sum;<br>
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;/* 1から10まで加算する */<br>
          &nbsp;&nbsp;&nbsp;&nbsp;sum = add(1, 10);<br>
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;printf("計算結果：%d\n", sum);<br>
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>
          }<br>
          <br>
          /* iからjまで加算して結果を戻す関数 */<br>
          int add(int i, int j)<br>
          {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;int n, sum = 0;<br>
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;for (n = i; n <= j; n++)<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum += n;<br>
          &nbsp;&nbsp;&nbsp;&nbsp;}<br>
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;return sum;<br>
          }
        </code></td></tr></table>
        <br><br>
        <h3><a name="build">コンパイルとビルドについて</a></h3>
        このあとプログラムを「コンパイル」するのですが、<br>
        Visual Studioには別に「ビルド」という言葉があります。<br>
        <br>
        まず、コンパイルはプログラムをアプリケーションに変換する作業<br>
        ということを前に説明しました。<br>
        これは厳密には間違っています。<br>
        実は「アプリケーション」ではなく「中間ファイル」に変換する作業なのです。<br>
        <img src="img/build001.png" border="1"/><br>
        <br>
        規模が大きいプログラムでは、このソースファイルが複数作られていることが<br>
        多いです。<br>
        ソースファイルの数だけ中間ファイルが作られます。<br>
        その中間ファイルを1つにまとめることで「アプリケーション」が作られます。<br>
        これを「<b><font color="red">リンク</font></b>」と言います。<br>
        <img src="img/build002.png" border="1"/><br>
        <br>
        この「コンパイル」と「リンク」の一連の流れのことを「<b><font color="red">ビルド</font></b>」と呼びます。<br>
        <br><br>
        <h3><a name="execbuild">ビルドする</a></h3>
        では、ビルドします。<br>
        <br>
        「ビルド(B)」をクリックして、「ソリューションのビルド(B)」をクリックします。<br>
        <img src="img/execbuild001.png" border="1"/><br>
        <br>
        「出力」というウィンドウが表示され、<br>
        「========== ビルド: 1 正常終了、0 失敗、0 更新不要、0 スキップ ==========」<br>
        と表示されればOKです。<br>
        <img src="img/execbuild002.png" border="1"/><br>
        <br>
        もし表示されない場合は、入力ミスしています。<br>
        入力したプログラムを見直しましょう。エラー一覧の内容から推測ができます。<br>
        ほんの一部ですが、下記に推測できるパターンを記載します。<br>
        <br>
        <table border="1"><tr><td><code>';' が必要です<br>
        構文エラー: ';' が、識別子 '○○' の前に必要です。</code></td></tr></table>
        どこかに「;」を入力し忘れていませんか？<br>
        <br>
        <table border="1"><tr><td><code>';' が必要です<br>
        ';' が ':' の前にありません。</code></td></tr></table>
        どこかで「;」を間違えて「:」と入力していませんか？<br>
        <br>
        <table border="1"><tr><td><code>ファイル名が必要です<br>
        '&gt;' がありません。</code></td></tr></table>
        1行目に「&gt;」を入力忘れていませんか？<br>
        <br>
        <table border="1"><tr><td><code>ファイルの末尾でコメントが閉じられていません<br>
        コメント内で予期しない EOF が見つかりました。</td></tr></table>
        「/* ○○ */」になっている行は正しく入力できていますか？<br>
        <br>
        ビルドが終了したら、完成物を確認してみましょう。<br>
        ソリューションが保存されているフォルダを開いてください。<br>
        そこから「x64」→「Debug」とフォルダを開いてください。<br>
        <img src="img/execbuild003.png" border="1"/><br>
        <img src="img/execbuild004.png" border="1"/><br>
        <br>
        アプリケーションとなる「.exe」ファイルの他に、拡張子が「<font color="red"><b>.pdb</b></font>」のファイルが<br>
        あると思います。<br>
        <img src="img/execbuild005.png" border="1"/><br>
        これが「中間ファイル」です。<br>
      <br><br>
      <h3><a name="exec">実行する</a></h3>
      では、さっそく実行してみましょう。<br>
      何も起きない。もしくは一瞬で画面が消えませんでしたか？<br>
      はい、プログラムがすぐに終了するため一瞬で画面が閉じてしまいます。<br>
      <br>
      Visual Studioからプログラムを実行することによって、<br>
      自動的に画面が閉じないようにできますので、その方法で実行します。<br>
      <br>
      「デバッグ(D)」をクリックし、「デバッグなしで実行(H)」をクリックします。<br>
      <img src="img/exec001.png" border="1"/><br>
      その結果、次の画面が表示されます。<br>
      <img src="img/exec002.png" border="1"/><br>
      「計算結果：55」がプログラムの実行結果となります。<br>
      それ以降のテキストはVisual Studioが表示しています。<br>
      何か適当にキー(Enterキーなど)を押すと画面が終了します。<br>
      </center></td></tr></table>
      <hr>
      <a href="../../index.html">IT入門・研究室</a> | <a href="../index.html">C言語入門</a>
      <table><tr><td><small>
        当Webサイトに記載されている内容は、筆者が独自に調査・研究した内容をまとめています。<br>
        そのため、記載されている内容によって、<br>
        いかなる損害が発生したとしても、筆者は責任を負いかねますのでご了承ください。
      </small></td></tr></table>
    </center>
   </body>
</html>